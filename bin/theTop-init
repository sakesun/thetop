#!/bin/bash

export THETOP_BIN="`cd \`dirname $0\`; pwd`"
. "$THETOP_BIN/theTop-setenv"

if [ ! -e "$THETOP_BIN/activate" ] ; then
    echo
    echo "*** VirtualEnv: Generate Python Interpreter ***"
    TMP_PATH=$PATH
    export PATH=$THETOP_PREV_PATH
    virtualenv --no-site-packages $THETOP_HOME
    echo "*** VirtualEnv: Done ***"
    echo
    export PATH=$TMP_PATH
    unset TMP_PATH
fi

# *** activate the ENV ***
. "$THETOP_BIN/activate"

# *** install packages ***
pip install zc.buildout

# *** build out init ***
if [ ! -e "$THETOP_HOME/buildout.cfg" ]; then
    echo
    echo "*** BuildOut: Init ***"
    pushd $THETOP_HOME
        bin/buildout init
		rm README.txt
    popd
    echo "*** BuildOut: Done ***"
    echo
fi
